# 位姿求解

现在我们已经知道了 N 对 特征点， 我们需要计算相机的位姿，即相机的位置和旋转。

## 对极几何 2D - 2D

接下来简单对对极几何进行推断
$$
p_1 = KP \\
p_2 = K(RP + t) \\
x_1 = K^{-1}p_1 \\
x_2 = L^{-1}p_2 \\
$$

最后可以得到 

$$
x_2^Tt \times R x_1 = 0 \\
p_2^TK^{-T}t \times R K^{-1}p_1 = 0 \\
$$

将 $E = t \times R$ 称为本质矩阵 $F = K^{-T}EK^-1$ 称为基础矩阵

本质矩阵 E 看上去是平移矩阵(三个自由度) 和 旋转矩阵 (三个自由度) 的组合，但是本质矩阵 E 的秩为 2，所以本质矩阵 E 只有 5 个自由度。

我们使用8个点来估计 本质矩阵， 可以假设这个组合是一个3x3方阵，代入可得

$$
e = [e_1, e_2, e_3, e_4, e_5, e_6, e_7, e_8, e_9]^T
[u_1u_2, u_1v_2, u_1, v_1u_2, v_1v_2, v_1, u_2, v_2, 1] e = 0
$$

这就是一个 8x9 的线性方程组，可以通过 奇异值求解 SVD
