# <font color="deepskyblue">标定功能介绍</font>

在 SLAM、机器人视觉、自动驾驶等邻域中，标定的核心目的是建立不同传感器或坐标系之间的精准数学映射关系，消除硬件制造、安装带来的系统误差，让传感器数据具备物理一致性和可解释性，为后续的定位，建图，感知提供可靠输入

## <font color="skyblue">标定的核心目的</font>

1. 消除传感器固有误差（内参标定）

    传感器在生产制造时会产生固有缺陷，内参标定就是求解这些缺陷的数字模型并进行补偿
    
    + 相机： 矫正镜头畸变（径向畸变，切向畸变），求解焦距，主点坐标等内参，让像素坐标能准确转换为相机坐标下的三维坐标
    + 激光雷达：校准测距误差、角度分辨率误差、激光束发散角误差，提升点云的空间精度
    + IMU：标定零偏，尺度因子，非正交误差，修正加速度计和陀螺仪的输出数据，抑制运动过程中的漂移

2. 建立传感器间的空间/时间关联（外参/时间标定）

    多传感器融合系统中，不同传感器安装位置，采样频率不同，标定的目的是建立它们之间的刚性变换和时间同步
    + 空间外参：求解传感器件的旋转矩阵R和平移向量t，让不同传感器的数据能统一到同一坐标系下
    + 时间同步：校准不同传感器的采样时间戳偏差，避免因时间不同步导致融合数据错位

3. 保证系统精度与一致性（量产标定）
    
    在工业/消费级产品量产场景，标定能确保同批次产品的传感器参数一致，避免因硬件个体差异导致性能参差不齐，同时为后续在线标定提供精准初始参数

## 常见的标定方法

按标定对象可分为 内参标定、外参标定、时间同步标定 三类，以下是各类型的主流方法

### 传感器内参标定

相机： 张正友棋盘格标定法/自标定法

激光雷达：平面靶标标定法/角反射器标定法

IMU：六面静置标定法/速率转台标定法

### 多传感器外参标定

这是 SLAM/机器人 融合的核心，主流方法分为 基于靶标 和 无靶标 两类

#### 基于靶标的外参标定（精度高，适合工厂离线标定）

1. 相机-激光雷达
    + 棋盘格 + 反光标记标定法
    + 制作带反光点的棋盘格靶标，相机检测角点，激光雷达检测反光点，建立 2D 图像特征与 3D 点云特征的对应关系，求解外参
2. IMU - 激光雷达
    + ~~旋转标定台法~~
    + ~~传感器固定在电动旋转台，匀速旋转时采集 IMU 预积分数据和激光雷达同心圆点云，利用运动约束求解外参~~
3. 相机 - IMU
    + ~~Kalibr工具链标定~~
    + ~~基于 ROS 平台，利用棋盘格靶标和传感器同步数据，联合优化相机内参、IMU 内参及两者外参~~

#### 无靶标外参标定（无需专用设备，适合在线标定）

1. 激光雷达-相机
    + 场景特征匹配法
    + 提取场景中的边缘、平面等共同特征（如墙角/地面），通过特征点配准求解外参
2. IMU-轮速记
    + 里程计约束法
    + 对比 IMU 预积分里程与轮速计里程，利用匀速 / 静止运动约束，在线优化外参和尺度因子
3. 多激光雷达
    + 点云配准法
    + 利用多雷达扫描同一区域的重叠点云，通过 ICP（迭代最近点）算法配准，求解雷达间外参

### 时间同步标定

多传感器采样频率不同，时间同步是融合的前提，常见方法：

1. 硬件同步：通过 PTP（精确时间协议）、GPIO 触发信号实现传感器硬件层面的时间戳对齐，精度高，适合车载/工业场景
2. 软件同步：
    + 基于事件的标定：利用传感器采集的同一物理事件（如标定板边缘）的时间戳，计算时间偏移量。
    + 基于数据融合的标定：将时间偏移量作为优化变量，加入 SLAM 后端优化（如 LIO-SAM），在线估计并修正时间偏差。

## 标定方法选型原则

1. 离线工厂标定：优先选基于靶标的方法（棋盘格、旋转台），精度高、一致性强，适合量产环节。
2. 在线场景标定：优先选无靶标方法（场景特征匹配、运动约束），无需人工干预，适配动态环境。