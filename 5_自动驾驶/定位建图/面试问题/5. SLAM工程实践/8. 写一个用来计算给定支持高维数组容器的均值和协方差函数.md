# 写一个用来计算给定支持高维数组容器的均值和协方差函数

## 使用 Eigen 库的优化版本

```cpp
#include <Eigen/Dense>
#include <vector>

Eigen::MatrixXd to_eigen_matrix(const vector<vector<T>>& data) {
    if (data.empty()) return Eigen::MatrixXd();

    size_t rows = data.size();
    size_t cols = data[0].size();

    Eigen::MatrixXd mat(rows, cols);

    for (size_t i = 0; i < rows; i++) {
        for (size_t j = 0; j < cols; j++) {
            mat(i, j) = data[i][j];
        }
    }
    return mat;
}

auto eigen_mean_covariance(const Eigen::MatrixXd& data) {
    if (data.rows() == 0) {
        throw std::invalid_argument("Data matrix is empty");
    }

    // 计算均值
    Eigen::VectorXd means = data.colwise().mean();

    // 计算协方差 （无偏估计）
    Eigen::MatrixXd centered = data.rowwise() - means.transpose();
    Eigen::MatrixXd cov = (centered.adjoint() * centered) / double(data.rows() - 1);

    return std::make_pair(means, cov);
}
```
