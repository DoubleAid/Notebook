# 给定若干个三维空间点位置坐标，写一个空间平面拟合的函数

## 总结

平面拟合通常有以下几个问题：

+ 最小二乘法 (代数距离)
+ 正交距离回归 （几何距离）
+ 随机抽样一致性（RANSAC）
+ 鲁棒拟合方法（M-估计）
+ 优化库方法 （ceres/g2o）

| 方法 | 原理 | 优点 | 缺点 | 适用场景 |
| ---- | ---- | ---- | ---- | ---- |
| 代数最小二乘 | 最小化代数距离 | 计算快，闭式解 | 对离群点敏感 | 高精度数据，无噪声 |
| 几何最小二乘 | 最小化垂直距离 | 精度高，物理意义明确 | 计算复杂 | 精确测量数据 |
| RANSAC | 随机抽样+一致性检验 | 对离群点鲁棒 | 可能非最优，需调参 | 含大量离群点的数据 |
| M-估计 | 鲁棒损失函数 | 平衡效率和鲁棒性 | 需要迭代求解 | 适度噪声数据 |
| Hough变换 | 参数空间投票 | 能处理多个平面 | 计算和存储开销大 | 多平面分割 |

## 最小二乘法 （代数距离）

+ 方法原理：最小化所有点到平面代数距离的平方和
+ 平面方程：ax + by + cz + d = 0 (约束 $a^2 + b^2 + c^2 = 1$)
+ 求解方法：
  + 对点云进行中心化： $p_i^, = p_i - \overline{p}$
  + 残差就变成了 $e = (ax_i^, + by_i^, + cz_i^,)$
  + $d = -a\overline{x} - b\overline{y} - c\overline{z}$

设 $n = [a, b, c]^T$

$$
A = \begin{}
$$
所以