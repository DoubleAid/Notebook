# GNSS 传感器数据融合流程

融合方式有两种：松组合 和 紧组合

## 松组合

+ 工作方式：GNSS和IMU各自独立解算出一个完整的位置、速度、姿态结果，然后在数据输出层面进行融合（通常用卡尔曼滤波器）。

+ 状态预测、
  + 利用 IMU 数据，通过惯性导航力学方程，从上一时刻的状态预测当前时刻的状态
  + 由于IMU误差（零偏、标度因子等）会累积，纯惯性导航会快速发散。
+ 状态更新：
  + 当GNSS观测数据到来时，将其与预测的状态进行比较，产生观测残差。
  + 卡尔曼滤波器根据GNSS观测的不确定性和状态预测的不确定性，计算出最优卡尔曼增益。
  + 利用增益将观测残差反馈修正状态预测值，得到当前时刻最优的融合估计，并重置误差的发散。
+ 常用滤波器：
  + 扩展卡尔曼滤波：最常用，适用于非线性系统的线性化近似。
  + 无迹卡尔曼滤波：对非线性系统有更好的处理。
  + 误差状态卡尔曼滤波：在惯导融合中非常流行，在误差状态空间进行滤波，数值更稳定。

## 输出与完好性监测

+ 融合结果输出：
  + 高精度位置、速度、姿态：这是最主要输出。
  + 精确授时：GNSS提供高精度的时间信息。
  + 不确定性估计：协方差矩阵，代表了输出结果的置信度。
+ 完好性监测：
  + 接收机自主完好性监测：利用冗余信息，检测和排除故障卫星的观测值。
  + 传感器一致性检查：比较不同传感器的输出，检测GNSS多路径、欺骗或IMU故障。
