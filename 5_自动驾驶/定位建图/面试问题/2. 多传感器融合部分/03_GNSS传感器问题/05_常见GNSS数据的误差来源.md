# GNSS数据的误差

GNSS（全球导航卫星系统，如 GPS、北斗、GLONASS）的数据误差直接影响定位精度，尤其在车载 SLAM、高精地图构建等场景中，误差控制是全局定位的核心。常见误差按误差来源可分为 5 大类，每类误差的成因、影响及工程补偿方法如下（结合车载实战场景说明）：

## 一、卫星端误差（来自卫星本身）

### 1. 星历误差

+ 成因：卫星广播星历（描述卫星轨道的参数）与卫星真实轨道存在偏差（由卫星轨道摄动、地面站定轨误差导致）；
+ 影响：导致卫星位置计算错误，是 GNSS 定位的主要误差源之一，静态场景误差约 1~5m，动态场景（如卫星变轨）可能更大；
+ 补偿方法：
  + 采用精密星历（如 IGS 提供的事后精密星历，误差 < 0.1m），适合离线高精地图构建；
  + 实时场景用差分 GNSS（RTK），通过基准站修正星历误差。

### 2. 钟差误差

+ 成因：卫星原子钟（铷钟 / 铯钟）与理想 GPS 时间的偏差（卫星钟漂移、温度变化影响）；
+ 影响：导致信号传播时间测量误差（1ns 钟差对应 30cm 距离误差），误差量级约 1~10ns，对应距离误差 0.3~3m；
+ 补偿方法：
  + 接收端通过卫星广播的钟差修正参数（如 GPS 的钟差多项式系数）实时修正；
  + RTK 场景中，基准站与移动站的钟差可通过差分抵消。

### 3. 卫星硬件误差

+ 成因：卫星天线相位中心偏移（天线实际接收信号的中心与标称中心不一致）、信号发射功率波动；
+ 影响：导致距离测量偏差，误差量级约 1~5cm（相位中心偏移）；
+ 补偿方法：
  + 采用卫星天线相位中心修正模型（如 IGS 提供的天线校准参数）；
  + 车载场景中，避免使用老旧或低成本卫星天线（硬件误差更大）。

## 二、传播路径误差（信号从卫星到接收机的过程中）

### 1. 电离层延迟误差

+ 成因：卫星信号穿过电离层（高空带电粒子层）时，传播速度变慢、路径弯曲，延迟量与电离层电子密度相关（白天、太阳活动期电子密度高，延迟更严重）；
+ 影响：单频接收机误差可达 10~50m（白天）、1~5m（夜间），是 GNSS 动态定位的主要误差源；
+ 补偿方法：
  + 双频接收机（如 GPS L1+L2、北斗 B1+B3）：利用不同频率信号的电离层延迟差异，通过模型（如 Klobuchar 模型）实时修正；
  + 单频接收机：采用电离层延迟经验模型（如 Klobuchar），或通过 RTK 差分抵消部分误差。

### 2. 对流层延迟误差

+ 成因：卫星信号穿过对流层（低空大气）时，受大气折射率影响产生传播延迟，与气温、气压、湿度相关（雨天、高温高湿环境更严重）；
+ 影响：误差量级约 0.5~2m（仰角低时更大，如卫星接近地平线时）；
+ 补偿方法：
  + 采用对流层延迟模型（如 Saastamoinen 模型、Hopfield 模型），结合接收机所在地的气象参数（气温、气压）修正；
  + 车载场景中，可通过 RTK 基准站的气象数据辅助修正。

### 3. 多路径误差（最影响车载场景）

+ 成因：卫星信号经周围物体（如建筑物、树木、桥面、车辆）反射后，与直射信号同时到达接收机天线，形成叠加干扰；
+ 影响：导致距离测量偏差，车载城市道路场景误差可达 1~10m，遮挡严重区域（如隧道口、密集楼群）可能导致定位失锁；
+ 补偿方法（车载场景核心优化）：
  + 硬件：采用带多路径抑制功能的天线（如扼流圈天线，减少反射信号接收），安装位置避开遮挡（如车顶中央，远离车身金属部件）；
  + 软件：多路径检测算法（如基于信号强度、载波相位噪声的检测，剔除多路径污染数据）；
  + 融合 IMU、激光雷达数据（SLAM 紧耦合），在多路径严重时切换为惯性导航。

## 三、接收机端误差（来自用户接收设备）

### 1. 接收机钟差

成因：接收机本地时钟（晶振）与 GPS 时间的偏差（精度远低于卫星原子钟）；
影响：导致信号传播时间测量误差，误差量级约 1~10μs（对应距离误差 300~3000m），但可通过定位算法抵消；
补偿方法：
定位解算时将接收机钟差作为未知量，与位置、速度一起求解；
RTK 场景中，基准站与移动站的钟差可通过差分抵消。

### 2. 接收机硬件误差

+ 成因：
  + 天线相位中心偏移（与卫星端类似，接收机天线的实际相位中心与安装中心不一致）；
  + 射频前端噪声（信号放大、滤波过程中引入的噪声，影响信号解调精度）；
+ 影响：相位中心偏移误差约 1~5cm，射频噪声导致距离测量误差约 0.1~1m；
+ 补偿方法：
  + 采用高精度接收机天线（如测绘级天线，相位中心偏移 < 1cm）；
  + 选择低噪声射频前端的接收机（如 Trimble、Septentrio 等工业级接收机）。

### 3. 观测误差

+ 成因：
  + 伪距测量误差（码相位观测的量化误差、噪声）；
  + 载波相位测量误差（相位跟踪噪声、整周模糊度解算误差）；
+ 影响：伪距误差约 1~3m（民用接收机）、0.1~0.5m（精密接收机）；载波相位误差约 1~3mm（但受整周模糊度影响）；
+ 补偿方法：
  + 采用载波相位平滑伪距（利用载波相位的高精度修正伪距误差）；
  + RTK 场景中，通过载波相位差分解算整周模糊度，提升定位精度。

## 四、几何误差（卫星与接收机的相对几何关系）

### 1. 几何精度因子（GDOP）误差

成因：卫星在天空中的分布情况（如卫星集中在一侧，几何关系差）导致定位解算的误差放大；
影响：用 GDOP 值量化（GDOP=√(PDOP²+TDOP²)，PDOP 为位置精度因子，TDOP 为时间精度因子）：
GDOP<2：几何关系极佳，误差小；
GDOP>6：几何关系差，误差放大（可能达数米）；
补偿方法：
接收机选择多系统融合（如 GPS + 北斗 + GLONASS，卫星数量更多，几何分布更优）；
车载场景中，避开遮挡区域（如隧道、地下车库），确保至少 4 颗以上高仰角卫星可见。

## 五、其他误差（环境、人为因素）

### 1. 环境干扰误差

+ 成因：
  + 电磁干扰（如车载雷达、通信设备、高压电线产生的电磁信号，干扰 GNSS 信号接收）；
  + 天气影响（暴雨、暴雪、大雾等降低信号传播质量，导致接收信噪比下降）；
+ 影响：导致信号失锁或测量噪声增大，误差量级约 1~10m，严重时定位失效；
+ 补偿方法：
  + 接收机天线远离电磁干扰源（如车载 GNSS 天线避开激光雷达、毫米波雷达安装位置）；
  + 采用抗干扰接收机（如带自适应滤波、窄带滤波功能的接收机）。

### 2. 人为干扰误差

+ 成因：
  + 有意干扰（如 GNSS 干扰器、欺骗器，发射虚假信号误导接收机）；
  + 无意干扰（如城市中大量无线通信设备的信号叠加）；
+ 影响：导致定位偏差（欺骗器可能导致偏差数百米）或定位失锁；
+ 补偿方法：
  + 采用抗欺骗接收机（如带信号指纹验证、多天线方向检测的设备）；
  + 车载场景中，结合 SLAM 紧耦合（激光 + IMU），在 GNSS 受干扰时切换为惯性导航。

## 六、车载场景误差控制核心总结

+ 误差优先级：多路径误差 > 电离层 / 对流层延迟 > 星历 / 钟差 > 几何误差；
+ 工程补偿策略：
  + 硬件：选择工业级 GNSS 接收机 + 扼流圈天线，安装在车顶无遮挡位置；
  + 软件：多系统融合（GPS + 北斗 + GLONASS）、RTK 差分、IMU/GNSS 紧耦合（抵消多路径和遮挡误差）；
  + 场景适配：城市密集区依赖 SLAM 补盲，开阔道路（高速路）依赖 GNSS+RTK 实现高精度定位。

这些误差的控制直接决定了 GNSS 在车载 SLAM 中的作用 —— 通过硬件选型 + 算法补偿，可将定位误差从民用单频的 10~20m，提升至 RTK + 融合后的厘米级（高精地图构建）或分米级（实时定位）。