# GNSS或者RTK的数据有什么特点？

## 核心概括

+ GNSS（如GPS、北斗）（全球导航卫星系统）：提供绝对位置，精度在米级，像一张“世界地图”，告诉你大概在哪个街区。
+ RTK（实时动态差分定位）：提供厘米级精度的绝对位置，像一张“施工图纸”，能精确到具体的某个点。

## GNSS

GNSS接收机（普通的手机、车载导航）通常输出如下信息：

+ 经纬高坐标：最常见的输出，基于WGS84坐标系。例如 (39.9042° N, 116.4074° E, 50m)
+ 精度因子：PDOP/HDOP/VDOP：表示定位精度衰减因子，值越小，卫星几何构型越好，理论上精度越高。
+ 卫星状态：可见卫星数、使用的卫星数、信噪比等。
+ 速度信息：通常通过多普勒效应计算出速度矢量。
+ 时间戳：GNSS提供非常精确的全球时间。

### 精度特点

+ 绝对精度：1-5米（在无SA政策干扰的民用码下）。这是其最核心的特点：提供具有绝对地理参考的坐标。
+ 相对稳定，但存在漂移：在静态情况下，定位点会在真实位置周围一个数米范围的区域内“跳动”。
+ 误差来源复杂：
  + 卫星端：轨道误差、卫星钟差。
  + 传播路径：电离层延迟、对流层延迟（受天气影响）。
  + 接收端：多路径效应（信号反射）、接收机钟差。

### 可用性与可靠性

+ 全球覆盖：只要在室外开阔地带，基本全球可用。
+ 易受遮挡影响：在城市峡谷、树林、隧道内，信号丢失或严重退化。
+ 数据独立：单台接收机即可工作，不依赖其他基础设施。

## RTK

RTK不是一种新的卫星系统，而是一种利用GNSS原始观测数据的高精度处理方法。

### 工作原理

RTK系统至少需要两台接收机：

1. 基准站：架设在坐标精确已知的点上
2. 移动站：待定位的设备

基准站计算出自己已知精确位置与卫星观测值之间的误差（称为“差分校正值”），然后将这个校正数据实时发送给移动站。移动站应用此校正，极大消除公共误差，从而获得厘米级精度。

### 数据内容与输出

RTK输出除了包含GNSS的所有信息外，最关键的是：

+ 定位结果状态：
  + 浮动解：精度在几十厘米到亚米级，表示正在收敛但未固定。
  + 固定解：厘米级精度（通常2-3厘米），是RTK的终极目标。
  + 单点解：等同于普通GNSS，表示RTK失效。
+ 协方差信息：输出位置的估计精度，如 pos_x ± 0.02m。

### 精度特点

+ 绝对精度：厘米级（1-3厘米）。这是RTK的革命性特点。
+ 高稳定性：固定解状态下，点位跳动非常小，几乎是静止的。
+ 误差消除机制：
  + 几乎消除公共误差：卫星钟差、轨道误差、大气延迟（在短距离内，<10km）。
  + 显著削弱多路径效应和接收机噪声的影响。

### 可用性与可靠性

+ 依赖基准站：必须能稳定接收到基准站的差分信号（通过电台、4G网络等）。这是最大的限制。
+ 初始化（收敛）时间：从启动到获得第一个“固定解”需要时间，通常几秒到几十秒。
+ 易失锁：遮挡、电磁干扰等都可能导致“固定解”退化为“浮动解”甚至“单点解”。
+ 距离限制：移动站与基准站的距离（基线长度）不能太远（通常<30km），否则大气误差差异过大，校正效果变差。

## GNSS 和 RTK 的比较

| 应用场景 | GNSS 的作用 | RTK 的作用 |
| ---- | ---- | ---- |
| 全局定位​ | 提供米级的全局位置，防止SLAM绝对位置的长期漂移。可以将局部地图对齐到全球坐标系。| 提供厘米级的全局位置，几乎完全消除SLAM的全局漂移。可以实现真正的全局一致地图。|
| 初始化/重定位​ | 提供一个粗略的初始位置，帮助系统快速启动或从跟踪失败中恢复。 | 提供极其精确的初始位姿，大大减小后续优化的不确定性。|
| 闭环检测​ | 提供位置提示，例如“两个地方经纬度接近，可能是同一个地方”，辅助视觉/激光闭环。 | 直接提供强有力的绝对位置约束，本身就可以作为最强的闭环检测，无需识别特征。 |
| 多传感器融合​ | 与IMU、轮速计等融合，约束惯导的漂移。通常作为松耦合的观测项。| 可以作为真值传感器，用于在线标定其他传感器（如相机-IMU外参、轮子里程计参数）的尺度。