# 激光雷达残差的构建

## ICP 的残差

这是目前主流方法（如LOAM系列、LIO-SAM）的核心思想。将当前帧的点云与一个局部地图或全局模型进行匹配，而不是与上一帧匹配。这能有效减少漂移。

核心步骤

1. 地图维护：维护一个局部体素地图或KD-Tree表示的全局地图。
2. 最近邻搜索：对于当前帧的每个点，在地图中寻找其最近邻点（或构成局部平面/线的点集）。
3. 残差建模：根据匹配到的几何特征类型，构建不同的距离残差。

常见的残差类型

1. 点到面的距离

公式：$r_{point−to−plane}=\frac {∣(p_i^w−q^w)⋅n^w∣} {∥n^w∥}$

其中，$p_i^w$是当前帧点变换到世界坐标系下的坐标，$q_w$是平面上一点，$n_w$是平面法向量。

优点：充分利用了环境的平面结构，约束力强。
代表：LOAM、LeGO-LOAM​ 中的平面点匹配。

2. 点到线的距离

3. 点到点的距离


