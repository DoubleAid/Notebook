# 智加面经1

技术面，一共约50min

## 1.自我介绍

## 2.介绍项目

## 3.（根据项目提问）有哪些传感器、传感器和树莓派怎么通信？通过SDK吗？自己解析怎么解析的？树莓派和主机怎么通信的

我所接触的传感器主要是激光雷达和摄像头，接下来介绍一下Camera和Lidar与主控计算单元（如域控制器或中央计算平台）  
摄像头的物理接口使用 MIPI CSI-2（主流嵌入式平台（如NVIDIA Jetson）的专用接口，支持多摄像头同步（如4x 2MP@30fps））或者千兆以太网进行传输  
激光雷达的物理接口使用 以太网或者 LVDS（原始ADC数据直连（需FPGA预处理）），数据的格式使用PCL（标准化XYZ+强度+时间戳结构）

数据传输架构上使用分布式预处理降低主通道的负载，即 `Camera → ISP → MCU（如TI TDA4）→ 压缩数据 → SOC` 和
`LiDAR → FPGA（点云过滤） → SOC` ，其中MCU和FPGA都是专用芯片，用于处理传感器数据，MCU负责图像处理，FPGA负责点云数据的预处理。

中间件方面可以使用 ROS2 和 Autosar架构， 使用ROS2时使用Sensor_msgs/Image和Sensor_msgs/PointCloud2消息类型，并配置QoS（如Best Effort vs Reliable）保证数据的实时性。  
在使用 Autosar 架构时，通过Sensor Abstraction Layer标准化访问接口，使用PDU Router管理多路传感器数据，通过PDU Manager进行数据传输。

在这个过程中有几个关键点：  
第一个是 时间同步问题：  
使用 PTP 进行像机和激光雷达的时间同步，SOC作为主时钟和传感器进行时钟同步，精度可以达到1ms。  
第二个就是数据流优化：  
可以使用DMA直接访问内存或者是 ROS2的Shared Memory Transport插件实现零拷贝传输，还可以通过 ROI 裁切，只传输感兴趣的区域。  
第三个就是功能安全通信：
根据ASIL-B/D要求：添加 CRC 校验（如Ethernet Frame的FCS校验）或者 双通道冗余传输（如CAN FD + Ethernet备份）  
Watchdog机制：添加传感器心跳包监测（超时阈值100ms）  

在实际中遇到的困难摄像头4路8MP摄像头原始数据需9.6Gbps带宽，使用H.265压缩（带宽降低至1.2Gbps），激光雷达方面每秒生成约200万点，大概为200M，通过体素网格下采样（保留10%关键点）

## (补充)TCP和UDP有啥区别，TCP需要建立连接吗

TCP面向连接，需要三次握手建立连接，四次握手断开连接，保证数据的可靠传输，但开销较大，适用于对数据传输可靠性要求较高的场景。
而UDP是无连接的，不需要握手，开销较小，但不保证数据的可靠性，适用于对实时性要求较高的场景。  
TCP确保传输可靠，通过确认应答（ACK）、超时重传、流量控制、拥塞控制等机制保证数据完整有序。传输效率较低，延迟较高。
而UDP则是尽可能快的将文件发出去，不保证数据可靠性，需要自己处理丢包问题。
TCP头部包含20字节固定+可选字段，包含序列号、确认号、窗口大小、校验和等控制信息。UDP头部包含固定8字节，仅包含源端口、目的端口、长度和校验和。

## 4.linux下怎么实现内存管理的？怎么进行进程调度的？有哪些进程调度算法？进程间通信方式有哪些？分别适用于什么场景？你觉得那种最高效？共享内存怎么实现的?



## 5.ROS你了解的怎么样？通信机制有哪些？

## 6.C++多态了解吗？很多析构函数virtual是为什么？智能指针用过吗？主要作用是什么？

## 7.做题：

### ①链表反转（三指针法）；

### ②手写实现一下智能指针shared_ptr，能体现大概思路就好

### ③链表原地排序

### ④链表的回环检测和回环点的检测
### 

## 8.反问环节
